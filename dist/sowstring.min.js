function SowString(e,n){var i=Object(n);i.indentMultiple=Number(i.indentMultiple)||0;if(i.tabReplace===undefined)i.tabReplace=String(" ").repeat(4);if(i.emptyLines===undefined)i.emptyLines=false;if(i.useHeading===undefined)i.useHeading=false;var t=String(e).replace(/\r\n?/g,"\n").replace(/\t/g,i.tabReplace).trimRight().split("\n");var r=[];r.parent=null;r.useHeading=i.useHeading;var a=[];function u(e,n,r,o){var d,l,f,s=r;e.isNode=true;e.level=o;e.indent=n;while(s<t.length){l=t[s].trimLeft();if(!l.length){if(i.emptyLines)a.push(t[s]);s++;continue}f=t[s].length-l.length;if(i.indentMultiple){f=Math.floor(f/i.indentMultiple)*i.indentMultiple;l=t[s].substr(f)}if(i.filter&&false===i.filter.apply(null,[l,f])){s++;continue}if(n>f)return s;if(n===f){e.push(...a);e.push(l);a=[];s++;continue}if(e.length&&e[e.length-1]instanceof Array&&e[e.length-1].indent!==f){let n=e.indent;let i=e[e.length-1].indent;let t=f;throw new Error("Bad indentation at line "+(s+1)+", we expected "+n+", "+i+" or more spaces, but received only "+t)}d=[];d.parent=e;if(i.useHeading)d.heading=e.pop();s=u(d,f,s,o+1);d.pushIndex=e.push(d)-1}return s}u(r,0,0,0);return r}function UnsowString(e,n){if(!e instanceof Array)throw new Error("Invalid tree to unsow (argument 1)");var i=Object(n);if(typeof i.each!=="function")i.each=null;if(typeof i.useHeading==="undefined")i.useHeading=Boolean(e.useHeading);var t=[];function r(e){if(e.parent&&i.each){let n=i.each(e,undefined);if(n!==undefined)t.push(n)}else if(e.parent&&i.useHeading)t.push(String(" ").repeat(e.parent.indent)+e.heading);for(var n of e){if(n instanceof Array)r(n);else if(i.each)t.push(i.each(e,n));else if(!n.trim())t.push(n);else t.push(String(" ").repeat(e.indent)+n)}}r(e);return t.join("\n")}if(typeof window!=="undefined"){window.SowString=SowString;window.UnsowString=UnsowString}if(typeof module!=="undefined"&&module.exports){module.exports.SowString=SowString;module.exports.UnsowString=UnsowString}