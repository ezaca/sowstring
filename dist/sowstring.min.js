function SowString(e,n){var i=Object(n);i.indentMultiple=Number(i.indentMultiple)||0;if(i.tabReplace===undefined)i.tabReplace=String(" ").repeat(4);if(i.emptyLines===undefined)i.emptyLines=false;if(i.useHeading===undefined)i.useHeading=false;var t=String(e).replace(/\r\n?/g,"\n").replace(/\t/g,i.tabReplace).trimRight().split("\n");var r=[];r.parent=null;r.useHeading=i.useHeading;function a(e,n,r,u){var d,o,f,l=r;e.isNode=true;e.level=u;e.indent=n;while(l<t.length){o=t[l].trimLeft();f=t[l].length-o.length;if(i.indentMultiple){f=Math.floor(f/i.indentMultiple)*i.indentMultiple;o=t[l].substr(f)}if(!o.length){if(i.emptyLines)e.push("");l++;continue}if(n>f)return l;if(n===f){e.push(o);l++;continue}if(e.length&&e[e.length-1]instanceof Array&&e[e.length-1].indent!==f){let n=e.indent;let i=e[e.length-1].indent;let t=f;throw new Error("Bad indentation at line "+(l+1)+", we expected "+n+", "+i+" or more spaces, but received only "+t)}d=[];d.parent=e;if(i.useHeading)d.heading=e.pop();l=a(d,f,l,u+1);d.pushIndex=e.push(d)-1}return l}a(r,0,0,0);return r}function UnsowString(e,n){if(!e instanceof Array)throw new Error("Invalid tree to unsow (argument 1)");var i=Object(n);if(typeof i.each!=="function")i.each=null;if(typeof i.useHeading==="undefined")i.useHeading=Boolean(e.useHeading);var t=[];function r(e){if(e.parent&&i.each){let n=i.each(e,undefined);if(n!==undefined)t.push(n)}else if(e.parent&&i.useHeading)t.push(String(" ").repeat(e.parent.indent)+e.heading);for(var n of e){if(n instanceof Array)r(n);else if(i.each)t.push(i.each(e,n));else t.push(String(" ").repeat(e.indent)+n)}}r(e);return t.join("\n")}if(typeof window!=="undefined"){window.SowString=SowString;window.UnsowString=UnsowString}if(typeof module!=="undefined"&&module.exports){module.exports.SowString=SowString;module.exports.UnsowString=UnsowString}