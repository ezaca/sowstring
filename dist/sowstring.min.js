function SowString(e,n){var i=Object(n);i.indentMultiple=Number(i.indentMultiple)||0;if(i.tabReplace===undefined)i.tabReplace=String(" ").repeat(4);if(i.emptyLines===undefined)i.emptyLines=false;if(i.useHeading===undefined)i.useHeading=false;var t=String(e).replace(/\r\n?/g,"\n").replace(/\t/g,i.tabReplace).trimRight().split("\n");var r=[];r.parent=null;r.useHeading=i.useHeading;var a=[];var d=[];function u(e,n,l,f){var o,p,s,g=l;e.isNode=true;e.level=f;e.indent=n;while(g<t.length){p=t[g].trimLeft();if(!p.length){if(i.emptyLines)a.push(t[g]);g++;continue}s=t[g].length-p.length;if(i.indentMultiple){s=Math.floor(s/i.indentMultiple)*i.indentMultiple;p=t[g].substr(s)}if(i.filter&&false===i.filter.apply(null,[p,s])){g++;continue}if(i.intercept&&d[g]===undefined){let a={sibling:n,parent:e.parent?e.parent.indent:0,child:n+i.tabReplace.length,node:e,tree:r};d[g]=i.intercept.apply(a,[p,s,g,t])}if(i.intercept&&d[g]!==undefined)s=d[g];if(n>s)return g;if(n===s){e.push(...a);e.push(p);a=[];g++;continue}if(e.length&&e[e.length-1]instanceof Array&&e[e.length-1].indent!==s){let n=e.indent;let i=e[e.length-1].indent;let t=s;throw new Error("Bad indentation at line "+(g+1)+", we expected "+n+", "+i+" or more spaces, but received only "+t)}o=[];o.parent=e;if(i.useHeading)o.heading=e.pop();g=u(o,s,g,f+1);o.pushIndex=e.push(o)-1}return g}u(r,0,0,0);return r}function UnsowString(e,n){if(!e instanceof Array)throw new Error("Invalid tree to unsow (argument 1)");var i=Object(n);if(typeof i.each!=="function")i.each=null;if(typeof i.useHeading==="undefined")i.useHeading=Boolean(e.useHeading);var t=[];function r(e){if(e.parent&&i.each){let n=i.each(e,undefined);if(n!==undefined)t.push(n)}else if(e.parent&&i.useHeading)t.push(String(" ").repeat(e.parent.indent)+e.heading);for(var n of e){if(n instanceof Array)r(n);else if(i.each)t.push(i.each(e,n));else if(!n.trim())t.push(n);else t.push(String(" ").repeat(e.indent)+n)}}r(e);return t.join("\n")}if(typeof window!=="undefined"){window.SowString=SowString;window.UnsowString=UnsowString}if(typeof module!=="undefined"&&module.exports){module.exports.SowString=SowString;module.exports.UnsowString=UnsowString}