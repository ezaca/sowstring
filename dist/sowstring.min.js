function SowString(e,n){var t=Object(n);t.indentMultiple=Number(t.indentMultiple)||0;if(t.tabReplace===undefined)t.tabReplace=String(" ").repeat(4);if(t.emptyLines===undefined)t.emptyLines=false;var i=String(e).replace(/\r\n?/g,"\n").replace(/\t/g,t.tabReplace).trimRight().split("\n");var r=[];r.parent=null;function o(e,n,r,l){var u,a,f,p=r;e.level=l;e.indent=n;while(p<i.length){a=i[p].trimLeft();f=i[p].length-a.length;if(t.indentMultiple){f=Math.floor(f/t.indentMultiple)*t.indentMultiple;a=i[p].substr(f)}if(!a.length){if(t.emptyLines)e.push("");p++;continue}if(n>f)return p;if(n===f){e.push(a);p++;continue}if(e.length&&e[e.length-1]instanceof Array){let n=e.indent;let t=e[e.length-1].indent;let i=f;throw new Error("Bad indentation at line "+(p+1)+", we expected "+n+", "+t+" or more spaces, but received only "+i)}u=[];u.parent=e;p=o(u,f,p,l+1);u.pushIndex=e.push(u)-1}return p}o(r,0,0,0);return r}function UnsowString(e,n){if(!e instanceof Array)throw new Error("Invalid tree to unsow (argument 1)");n=Object(n);if(typeof n.each!=="function")n.each=null;var t=[];function i(e){for(var r of e){if(r instanceof Array)i(r);else if(n.each)t.push(n.each(e,r));else t.push(String(" ").repeat(e.indent)+r)}}i(e);return t.join("\n")}if(typeof window!=="undefined"){window.SowString=SowString;window.UnsowString=UnsowString}if(typeof module!=="undefined"&&module.exports){module.exports.SowString=SowString;module.exports.UnsowString=UnsowString}