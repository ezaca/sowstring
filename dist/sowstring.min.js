function SowString(e,n){var i=Object(n);i.indentMultiple=Number(i.indentMultiple)||0;if(i.tabReplace===undefined)i.tabReplace=String(" ").repeat(4);if(i.emptyLines===undefined)i.emptyLines=false;if(i.useHeading===undefined)i.useHeading=false;var t=String(e).replace(/\r\n?/g,"\n").replace(/\t/g,i.tabReplace).trimRight().split("\n");var r=[];r.parent=null;r.useHeading=i.useHeading;var a=[];function u(e,n,r,d){var o,f,l,s=r;e.isNode=true;e.level=d;e.indent=n;while(s<t.length){f=t[s].trimLeft();if(!f.length){if(i.emptyLines)a.push(t[s]);s++;continue}l=t[s].length-f.length;if(i.indentMultiple){l=Math.floor(l/i.indentMultiple)*i.indentMultiple;f=t[s].substr(l)}if(n>l)return s;if(n===l){e.push(...a);e.push(f);a=[];s++;continue}if(e.length&&e[e.length-1]instanceof Array&&e[e.length-1].indent!==l){let n=e.indent;let i=e[e.length-1].indent;let t=l;throw new Error("Bad indentation at line "+(s+1)+", we expected "+n+", "+i+" or more spaces, but received only "+t)}o=[];o.parent=e;if(i.useHeading)o.heading=e.pop();s=u(o,l,s,d+1);o.pushIndex=e.push(o)-1}return s}u(r,0,0,0);return r}function UnsowString(e,n){if(!e instanceof Array)throw new Error("Invalid tree to unsow (argument 1)");var i=Object(n);if(typeof i.each!=="function")i.each=null;if(typeof i.useHeading==="undefined")i.useHeading=Boolean(e.useHeading);var t=[];function r(e){if(e.parent&&i.each){let n=i.each(e,undefined);if(n!==undefined)t.push(n)}else if(e.parent&&i.useHeading)t.push(String(" ").repeat(e.parent.indent)+e.heading);for(var n of e){if(n instanceof Array)r(n);else if(i.each)t.push(i.each(e,n));else if(!n.trim())t.push(n);else t.push(String(" ").repeat(e.indent)+n)}}r(e);return t.join("\n")}if(typeof window!=="undefined"){window.SowString=SowString;window.UnsowString=UnsowString}if(typeof module!=="undefined"&&module.exports){module.exports.SowString=SowString;module.exports.UnsowString=UnsowString}